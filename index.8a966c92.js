const e=document.querySelector(".close_modal_window"),t=document.querySelector(".modal_window");console.log(t);const a=document.querySelector("main"),s=(document.querySelector(".movie__template"),document.querySelector(".modal_inner"));console.log(a),a.addEventListener("click",(async function(e){if(e.preventDefault(),!e.target.classList.contains("movie__image"))return;t.classList.remove("is-hidden");!async function(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=28f50cf3f177782503c21b43af04c7bc`),a=await t.json();console.log(a),async function(e){try{const{desktop:t,tablet:a,mobile:n}=`https://image.tmdb.org/t/p/original${e.poster_path}`,i=`\n      <div class="modalMarkup trailer__picture">\n         <picture>\n            <source src= ${t} media="(min-width: 1200px)">\n            <source src= ${a} media="(min-width: 768px)">\n            <source src= ${n} media="(min-width: 320px)">\n            <img src= https://image.tmdb.org/t/p/original${e.poster_path} alt=${e.title} id =${e.id} class="modal__img">\n        </picture>\n      </div>\n      <div class="modal__content-movie ">\n\n        <p class="modal__title">${e.title}</p>\n        <div class="modal__box">\n          <div class="film-features">\n            <p class="film-features__text">Vote / Votes</p>\n            <p class="film-features__text">Popularity</p>\n            <p class="film-features__text">Original Title</p>\n            <p class="film-features__text">Genre</p>\n          </div>\n          <div class="film-values">\n            <p class="film-values__text">\n              <span class="film-values__vote film-values__vote--color">${e.vote_average}</span>\n              <span class="film-values__slash">/</span>\n              <span class="film-values__vote film-values__votes--color">${e.vote_count}</span>\n\n            </p>\n            <p class="film-values__text">\n              <span class="film-value__vote">${e.popularity.toFixed(1)}</span>\n            </p>\n            <p class="film-values__text">\n\n              <span class="film-values__vote">${e.original_title}</span>\n            </p>\n            <p class="film-values__text">\n              <span class="film-values__vote">${e.genres[0].name}</span>\n\n            </p>\n          </div>\n        </div>\n        <div class="modal__description">\n          <p class="modal__about">About</p>\n\n          <p class="modal__text">${e.overview}</p>\n\n        </div>\n        <div class="modal__btn-box" data-id="${e.id}">\n          <button class="modal__btn modal__btn--watched" type="button">Add to watched</button>\n          <button class="modal__btn modal__btn--queue" type="button">Add to queue</button>\n        </div>\n      </div>`;s.insertAdjacentHTML("beforeend",i)}catch(e){console.log(e)}}(a)}catch(e){console.log(e)}}(e.target.id)})),e.addEventListener("click",(async function(){t.classList.add("is-hidden"),s.innerHTML=""}));const n=document.querySelector("main"),i=async e=>{try{const t=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=28f50cf3f177782503c21b43af04c7bc"),a=await t.json(),s=await a.genres;if(e){const t=((e,t)=>e.filter((e=>t.includes(e.id))).map((e=>e.name)))(s,e);return t}}catch(e){console.log(e)}};(async()=>{try{const e=await fetch("https://api.themoviedb.org/3/trending/all/day?api_key=28f50cf3f177782503c21b43af04c7bc"),t=await e.json();(async e=>{const t=await Promise.all(e.map((async e=>{const t=`https://image.tmdb.org/t/p/original${e.poster_path}`,a=e.id,s=e.title?e.title:e.name,n=e.release_date?e.release_date:e.first_air_date,o=new Date(n).getFullYear(),l=e.genre_ids;return((e,t,a,s,n)=>`<li class="movie__template">\n    <img class="movie__image" id="${t}" src="${e}" alt='${a}' width="280px" height="398px"/> \n    <h5 class="movie__title">${a}</h5>\n    <div class="movie__informations"><span>${s.slice(0,2).join(", ")}</span> | <span>${n}</span></div>\n  </li>`)(t,a,s,await i(l),o)})));n.innerHTML=t.join("")})(await t.results)}catch(e){console.log(e)}})();document.querySelector("main").classList.add("movies-container");new Pagination("pagination",{totalItems:200,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span>⋅⋅⋅</span></a>'}});const o=document.querySelector("#form"),l=document.querySelector("#topSearch"),c=document.querySelector("main");o.addEventListener("submit",(e=>{e.preventDefault();const t=l.value;t&&((async e=>{try{const t=await fetch(e),a=await t.json();console.log(a),searchedMovies=await a.results,c.innerHTML=""}catch(e){console.log(e)}})("https://api.themoviedb.org/3/search/movie?&api_key=28f50cf3f177782503c21b43af04c7bc&query="+t),l.value="")}));const r=document.querySelector(".modal_inner"),d=document.querySelector(".video_modal"),p=e=>{(e=>{const t=`<iframe class="video_iframe"\n    width="600" height="337"\n    src="https://www.youtube.com/embed/${e}"\n    title="YouTube video player"\n    frameborder="0"\n    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"\n    allowfullscreen>\n    </iframe>`;d.innerHTML=t})(e.find((e=>"Trailer"===e.type)).key)};d.addEventListener("click",(e=>{e.target.classList.contains("video_iframe")||(d.classList.add("video_modal-hidden"),d.innerHTML="")})),r.addEventListener("click",(e=>{e.target.classList.contains("modal__img")&&(d.classList.remove("video_modal-hidden"),(async e=>{try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?api_key=28f50cf3f177782503c21b43af04c7bc`),a=await t.json(),s=await a.results;p(s)}catch(e){console.log(e)}})(640146))}),{passive:!0});
//# sourceMappingURL=index.8a966c92.js.map
