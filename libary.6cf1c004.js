function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},s=t.parcelRequire00e6;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequire00e6=s),s("cc2Wl"),s("abGcp"),s("8sK5a");var a=s("7IoHk"),l=s("zSg4k");const i=document.querySelector(".close_modal_window"),c=document.querySelector(".modal_window"),r=document.querySelector("main"),d=document.querySelector(".modal_inner"),m=document.querySelector(".modal_content");function p(){c.classList.add("is-hidden"),d.innerHTML="",document.body.classList.remove("stop-scrolling")}r.addEventListener("click",(async function(e){if(e.preventDefault(),!e.target.classList.contains("movie__image"))return;c.classList.remove("is-hidden");!async function(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=28f50cf3f177782503c21b43af04c7bc`);!async function(e){try{const{desktop:t,tablet:n,mobile:o}=`https://image.tmdb.org/t/p/original${e.poster_path}`,s=`\n      <div class="modalMarkup trailer__picture">\n         <picture>\n            <source src= ${t} media="(min-width: 1200px)">\n            <source src= ${n} media="(min-width: 768px)">\n            <source src= ${o} media="(min-width: 320px)">\n            <img src= https://image.tmdb.org/t/p/original${e.poster_path} \n            alt=${e.title} \n            id =${e.id} class="modal__img">\n        </picture>\n        <svg xmlns="http://www.w3.org/2000/svg" \n        width="70px" height="70px" \n        class="modal__svg" \n        id=${e.id}\n        viewBox="0 0 16 16">\n         <path \n         id=${e.id} d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n         <path\n         id=${e.id} d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z"/>\n        </svg>\n      </div>\n      <div class="modal__content-movie ">\n\n\n        <p class="modal__title">${e.title}</p>\n        <div class="modal__box">\n          <div class="film-features">\n            <p class="film-features__text">Vote / Votes</p>\n            <p class="film-features__text">Popularity</p>\n            <p class="film-features__text">Original Title</p>\n            <p class="film-features__text">Genre</p>\n          </div>\n          <div class="film-values">\n            <p class="film-values__text">\n              <span class="film-values__vote film-values__vote--color">${e.vote_average}</span>\n              <span class="film-values__slash">/</span>\n              <span class="film-values__vote film-values__votes--color">${e.vote_count}</span>\n            </p>\n            <p class="film-values__text">\n              <span class="film-value__vote">${e.popularity.toFixed(1)}</span>\n            </p>\n            <p class="film-values__text">\n              <span class="film-values__vote">${e.original_title}</span>\n            </p>\n            <p class="film-values__text">\n              <span class="film-values__vote">${e.genres[0].name}</span>\n            </p>\n          </div>\n        </div>\n        <div class="modal__description">\n          <p class="modal__about">About</p>\n          <p class="modal__text">${e.overview}</p>\n        </div>\n        <div class="modal__btn-box">\n          <button \n          class="modal__btn modal__btn--removeWatched" \n          id="${e.id}" type="button" >Remove from watched</button>\n          <button \n          class="modal__btn modal__btn--removeQueued"\n          id="${e.id}" type="button" >Remove from queue</button>\n\n        </div>\n      </div>`;d.insertAdjacentHTML("beforeend",s)}catch(e){console.log(e)}}(await t.json())}catch(e){console.log(e)}}(e.target.id),document.body.classList.add("stop-scrolling")})),i.addEventListener("click",p),document.body.addEventListener("keydown",(function(e){"Escape"===e.code&&(p(),c.removeEventListener("click",p),document.body.classList.remove("stop-scrolling"))})),document.body.addEventListener("click",(function(e){e.target===c&&(p(),document.body.classList.remove("stop-scrolling"),c.removeEventListener("click",p))}));m.addEventListener("click",(t=>{const n=t.target.id;if(t.target.classList.contains("modal__btn--removeWatched"))(e=>{if(l.watched.includes(e)){const t=l.watched.indexOf(e);l.watched.splice(t,1),console.log(l.watched);try{localStorage.removeItem(e)}catch(e){console.error(e.message)}}})(n),e(a).Notify.success("Succesfully removed from watched.");else{if(!t.target.classList.contains("modal__btn--removeQueued"))return void e(a).Notify.failure("Something went wrong. Please, try again later.");(e=>{console.log(localStorage);try{const t=localStorage.getItem(e),n=null===t?void 0:JSON.parse(t);localStorage.removeItem(n),console.log(localStorage)}catch(e){console.error(e.message)}})(n),e(a).Notify.success("Succesfully removed from queue.")}})),s("cc2Wl");const u=document.querySelector(".btn-watched"),_=document.querySelector(".btn-queue"),v=document.querySelector(".library"),f="watched",g=async e=>{const t=await Promise.all(e.map((async e=>{const t=await(async e=>{const t=`https://api.themoviedb.org/3/movie/${e}?api_key=28f50cf3f177782503c21b43af04c7bc`;try{const e=await fetch(t);return await e.json()}catch(e){console.error(e)}})(e),n=(e=>{let t=e.poster_path?e.poster_path:e.backdrop_path;return null===t?"https://images.pexels.com/photos/5721902/pexels-photo-5721902.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2":`https://image.tmdb.org/t/p/original${t}`})(t),o=t.title?t.title:t.name,s=t.release_date?t.release_date:t.first_air_date,a=new Date(s).getFullYear(),l=t.vote_average.toFixed(1),i=t.genres[0].name;return console.log(i),((e,t,n,o,s,a)=>`<li class="movie__template">\n    <img class="movie__image" id="${t}" src="${e}" alt='${n}' width="280px" height="398px"/>\n    <h5 class="movie__title">${n}</h5>\n    <div class="movie__informations"><span>${o}</span> | <span>${s}</span>\n    <span class="movie__rating">${a}</span></div>\n  </li>`)(n,e,o,i,a,l)})));v.innerHTML=t.join("")},h=e=>{try{const t=localStorage.getItem(e),n=JSON.parse(t);if(null===n)return;g(n),console.log("array:",n)}catch(e){console.error(e.message)}};h(f),u.addEventListener("click",(()=>{h(f)})),_.addEventListener("click",(()=>{h("queue")}));
//# sourceMappingURL=libary.6cf1c004.js.map
